generator client {
  provider        = "prisma-client-js"
  output          = "client"
  previewFeatures = ["relationJoins"]
}

datasource db {
  provider = "postgresql"
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model addresses {
  id                               String            @id
  userId                           String?
  companyId                        String?
  type                             AddressType       @default(HOME)
  label                            String?
  street                           String
  zipCode                          String
  city                             String
  state                            String?
  country                          String            @default("Deutschland")
  isPrimary                        Boolean           @default(false)
  latitude                         Float?
  longitude                        Float?
  createdAt                        DateTime          @default(now())
  createdBy                        String
  updatedAt                        DateTime
  updatedBy                        String
  company_profiles                 company_profiles? @relation(fields: [companyId], references: [id], onDelete: Cascade)
  users_addresses_createdByTousers users             @relation("addresses_createdByTousers", fields: [createdBy], references: [id])
  users_addresses_updatedByTousers users             @relation("addresses_updatedByTousers", fields: [updatedBy], references: [id])
  users_addresses_userIdTousers    users?            @relation("addresses_userIdTousers", fields: [userId], references: [id], onDelete: Cascade)

  @@index([city])
  @@index([companyId])
  @@index([userId])
  @@index([zipCode])
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model application_documents {
  id                                           String       @id
  applicationId                                String
  documentId                                   String
  label                                        String?
  createdAt                                    DateTime     @default(now())
  createdBy                                    String
  updatedAt                                    DateTime
  updatedBy                                    String
  applications                                 applications @relation(fields: [applicationId], references: [id], onDelete: Cascade)
  users_application_documents_createdByTousers users        @relation("application_documents_createdByTousers", fields: [createdBy], references: [id])
  documents                                    documents    @relation(fields: [documentId], references: [id], onDelete: Cascade)
  users_application_documents_updatedByTousers users        @relation("application_documents_updatedByTousers", fields: [updatedBy], references: [id])

  @@unique([applicationId, documentId])
  @@index([applicationId])
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model application_status_history {
  id            String            @id
  applicationId String
  status        ApplicationStatus
  changedBy     String?
  note          String?
  createdAt     DateTime          @default(now())
  createdBy     String
  applications  applications      @relation(fields: [applicationId], references: [id], onDelete: Cascade)
  users         users             @relation(fields: [createdBy], references: [id])

  @@index([applicationId])
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model applications {
  id                                  String                       @id
  studentId                           String
  jobId                               String
  companyId                           String
  status                              ApplicationStatus            @default(SUBMITTED)
  coverLetter                         String?
  matchScore                          Float?
  companyNotes                        String?
  submittedAt                         DateTime                     @default(now())
  reviewedAt                          DateTime?
  respondedAt                         DateTime?
  createdAt                           DateTime                     @default(now())
  createdBy                           String
  updatedAt                           DateTime
  updatedBy                           String
  application_documents               application_documents[]
  application_status_history          application_status_history[]
  company_profiles                    company_profiles             @relation(fields: [companyId], references: [id], onDelete: Cascade)
  users_applications_createdByTousers users                        @relation("applications_createdByTousers", fields: [createdBy], references: [id])
  jobs                                jobs                         @relation(fields: [jobId], references: [id], onDelete: Cascade)
  student_profiles                    student_profiles             @relation(fields: [studentId], references: [id], onDelete: Cascade)
  users_applications_updatedByTousers users                        @relation("applications_updatedByTousers", fields: [updatedBy], references: [id])
  messages                            messages[]

  @@unique([studentId, jobId])
  @@index([companyId])
  @@index([jobId])
  @@index([status])
  @@index([studentId])
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model audit_logs {
  id        String   @id
  userId    String?
  action    String
  entity    String
  entityId  String?
  changes   Json?
  ipAddress String?
  userAgent String?
  createdAt DateTime @default(now())
  createdBy String
  users     users    @relation(fields: [createdBy], references: [id])

  @@index([createdAt])
  @@index([entity, entityId])
  @@index([userId])
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model categories {
  id                                String       @id
  name                              String       @unique
  slug                              String       @unique
  description                       String?
  icon                              String?
  parentId                          String?
  isActive                          Boolean      @default(true)
  sortOrder                         Int          @default(0)
  createdAt                         DateTime     @default(now())
  createdBy                         String
  updatedAt                         DateTime
  updatedBy                         String
  users_categories_createdByTousers users        @relation("categories_createdByTousers", fields: [createdBy], references: [id])
  categories                        categories?  @relation("categoriesTocategories", fields: [parentId], references: [id])
  other_categories                  categories[] @relation("categoriesTocategories")
  users_categories_updatedByTousers users        @relation("categories_updatedByTousers", fields: [updatedBy], references: [id])

  @@index([slug])
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model company_documents {
  id                                       String           @id
  companyId                                String
  documentId                               String
  label                                    String?
  isPrimary                                Boolean          @default(false)
  createdAt                                DateTime         @default(now())
  createdBy                                String
  updatedAt                                DateTime
  updatedBy                                String
  company_profiles                         company_profiles @relation(fields: [companyId], references: [id], onDelete: Cascade)
  users_company_documents_createdByTousers users            @relation("company_documents_createdByTousers", fields: [createdBy], references: [id])
  documents                                documents        @relation(fields: [documentId], references: [id], onDelete: Cascade)
  users_company_documents_updatedByTousers users            @relation("company_documents_updatedByTousers", fields: [updatedBy], references: [id])

  @@unique([companyId, documentId])
  @@index([companyId])
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model company_locations {
  id                                       String           @id
  companyId                                String
  name                                     String
  street                                   String
  zipCode                                  String
  city                                     String
  country                                  String           @default("Deutschland")
  isPrimary                                Boolean          @default(false)
  createdAt                                DateTime         @default(now())
  createdBy                                String
  updatedAt                                DateTime
  updatedBy                                String
  company_profiles                         company_profiles @relation(fields: [companyId], references: [id], onDelete: Cascade)
  users_company_locations_createdByTousers users            @relation("company_locations_createdByTousers", fields: [createdBy], references: [id])
  users_company_locations_updatedByTousers users            @relation("company_locations_updatedByTousers", fields: [updatedBy], references: [id])
  jobs                                     jobs[]

  @@index([companyId])
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model company_matches {
  id                                     String           @id
  companyId                              String
  jobId                                  String
  studentId                              String
  matchScore                             Float
  reasons                                Json?
  companyViewed                          Boolean          @default(false)
  companyLiked                           Boolean?
  createdAt                              DateTime         @default(now())
  createdBy                              String
  updatedAt                              DateTime
  updatedBy                              String
  company_profiles                       company_profiles @relation(fields: [companyId], references: [id], onDelete: Cascade)
  users_company_matches_createdByTousers users            @relation("company_matches_createdByTousers", fields: [createdBy], references: [id])
  jobs                                   jobs             @relation(fields: [jobId], references: [id], onDelete: Cascade)
  users_company_matches_updatedByTousers users            @relation("company_matches_updatedByTousers", fields: [updatedBy], references: [id])

  @@unique([companyId, jobId, studentId])
  @@index([companyId, matchScore])
  @@index([jobId])
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model company_member_invites {
  companyId        String
  email            String
  role             CompanyMemberRole? @default(RECRUITER)
  invitedBy        String
  createdAt        DateTime?          @default(now()) @db.Timestamp(6)
  createdBy        String?            @default("system")
  company_profiles company_profiles   @relation(fields: [companyId], references: [id], onDelete: Cascade)
  users            users?             @relation(fields: [createdBy], references: [id], onDelete: NoAction, onUpdate: NoAction)
  company_members  company_members    @relation(fields: [invitedBy], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@id([email, companyId])
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model company_members {
  id                                     String                   @id
  companyId                              String
  userId                                 String
  role                                   CompanyMemberRole        @default(RECRUITER)
  status                                 CompanyMemberStatus      @default(ACTIVE)
  isPrimary                              Boolean                  @default(false)
  canEditCompany                         Boolean                  @default(false)
  canManageJobs                          Boolean                  @default(true)
  canViewApplications                    Boolean                  @default(true)
  canManageApplications                  Boolean                  @default(true)
  canManageMembers                       Boolean                  @default(false)
  canManageSubscription                  Boolean                  @default(false)
  invitedBy                              String?
  invitedAt                              DateTime?
  acceptedAt                             DateTime?
  createdAt                              DateTime                 @default(now())
  createdBy                              String                   @default("system")
  updatedAt                              DateTime
  updatedBy                              String                   @default("system")
  company_member_invites                 company_member_invites[]
  company_profiles                       company_profiles         @relation(fields: [companyId], references: [id], onDelete: Cascade)
  users_company_members_createdByTousers users                    @relation("company_members_createdByTousers", fields: [createdBy], references: [id], onDelete: SetNull)
  company_members                        company_members?         @relation("company_membersTocompany_members", fields: [invitedBy], references: [id], onDelete: NoAction, onUpdate: NoAction)
  other_company_members                  company_members[]        @relation("company_membersTocompany_members")
  users_company_members_updatedByTousers users                    @relation("company_members_updatedByTousers", fields: [updatedBy], references: [id], onDelete: SetNull)
  users_company_members_userIdTousers    users                    @relation("company_members_userIdTousers", fields: [userId], references: [id], onDelete: Cascade)

  @@unique([companyId, userId])
  @@index([companyId])
  @@index([isPrimary])
  @@index([status])
  @@index([userId])
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model company_profiles {
  id                                      String                   @id
  companyName                             String
  description                             String
  industry                                String?
  companySize                             String?
  website                                 String?
  contactEmail                            String?
  contactPhone                            String?
  isVerified                              Boolean                  @default(false)
  verifiedAt                              DateTime?
  createdAt                               DateTime                 @default(now())
  createdBy                               String                   @default("system")
  updatedAt                               DateTime
  updatedBy                               String                   @default("system")
  status                                  CompanyStatus            @default(ACTIVE)
  addresses                               addresses[]
  applications                            applications[]
  company_documents                       company_documents[]
  company_locations                       company_locations[]
  company_matches                         company_matches[]
  company_member_invites                  company_member_invites[]
  members                         company_members[]
  users_company_profiles_createdByTousers users                    @relation("company_profiles_createdByTousers", fields: [createdBy], references: [id], onDelete: SetNull)
  users_company_profiles_updatedByTousers users                    @relation("company_profiles_updatedByTousers", fields: [updatedBy], references: [id], onDelete: SetNull)
  jobs                                    jobs[]
  payments                                payments[]
  subscriptions                           subscriptions?

  @@index([companyName])
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model conversations {
  id                                   String     @id
  studentId                            String
  companyId                            String
  applicationId                        String?
  lastMessageAt                        DateTime   @default(now())
  createdAt                            DateTime   @default(now())
  createdBy                            String
  updatedAt                            DateTime
  updatedBy                            String
  users_conversations_createdByTousers users      @relation("conversations_createdByTousers", fields: [createdBy], references: [id])
  users_conversations_updatedByTousers users      @relation("conversations_updatedByTousers", fields: [updatedBy], references: [id])
  messages                             messages[]

  @@unique([studentId, companyId, applicationId])
  @@index([companyId])
  @@index([studentId])
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model documents {
  id                               String                  @id
  uploadedBy                       String
  type                             DocumentType
  filename                         String
  originalName                     String
  mimeType                         String
  fileSize                         Int
  url                              String
  thumbnailUrl                     String?
  metadata                         Json?
  isScanned                        Boolean                 @default(false)
  scanResult                       String?
  createdAt                        DateTime                @default(now())
  createdBy                        String
  updatedAt                        DateTime
  updatedBy                        String
  application_documents            application_documents[]
  company_documents                company_documents[]
  users_documents_createdByTousers users                   @relation("documents_createdByTousers", fields: [createdBy], references: [id])
  users_documents_updatedByTousers users                   @relation("documents_updatedByTousers", fields: [updatedBy], references: [id])
  message_attachments              message_attachments[]
  student_documents                student_documents[]

  @@index([type])
  @@index([uploadedBy])
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model jobs {
  id                          String             @id
  companyId                   String
  locationId                  String?
  title                       String
  description                 String
  requirements                String
  tasks                       String
  benefits                    String?
  profession                  String
  category                    String?
  aiTags                      String[]
  manualTags                  String[]
  requiredEducation           EducationLevel?
  salary                      Float?
  salaryMin                   Float?
  salaryMax                   Float?
  salaryCurrency              String             @default("EUR")
  startDate                   DateTime?
  applicationDeadline         DateTime?
  status                      JobStatus          @default(DRAFT)
  publishedAt                 DateTime?
  isPromoted                  Boolean            @default(false)
  promotionEndsAt             DateTime?
  viewCount                   Int                @default(0)
  applicationCount            Int                @default(0)
  createdAt                   DateTime           @default(now())
  createdBy                   String
  updatedAt                   DateTime
  updatedBy                   String
  applications                applications[]
  company_matches             company_matches[]
  company_profiles            company_profiles   @relation(fields: [companyId], references: [id], onDelete: Cascade)
  users_jobs_createdByTousers users              @relation("jobs_createdByTousers", fields: [createdBy], references: [id])
  company_locations           company_locations? @relation(fields: [locationId], references: [id])
  users_jobs_updatedByTousers users              @relation("jobs_updatedByTousers", fields: [updatedBy], references: [id])
  saved_jobs                  saved_jobs[]
  student_matches             student_matches[]

  @@index([category])
  @@index([companyId])
  @@index([publishedAt])
  @@index([status])
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model message_attachments {
  id         String    @id
  messageId  String
  documentId String
  createdAt  DateTime  @default(now())
  createdBy  String
  users      users     @relation(fields: [createdBy], references: [id])
  documents  documents @relation(fields: [documentId], references: [id], onDelete: Cascade)
  messages   messages  @relation(fields: [messageId], references: [id], onDelete: Cascade)

  @@unique([messageId, documentId])
  @@index([messageId])
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model messages {
  id                              String                @id
  conversationId                  String
  applicationId                   String?
  senderId                        String
  recipientId                     String
  content                         String
  isRead                          Boolean               @default(false)
  readAt                          DateTime?
  createdAt                       DateTime              @default(now())
  createdBy                       String
  updatedAt                       DateTime
  updatedBy                       String
  message_attachments             message_attachments[]
  applications                    applications?         @relation(fields: [applicationId], references: [id])
  conversations                   conversations         @relation(fields: [conversationId], references: [id], onDelete: Cascade)
  users_messages_createdByTousers users                 @relation("messages_createdByTousers", fields: [createdBy], references: [id])
  users_messages_updatedByTousers users                 @relation("messages_updatedByTousers", fields: [updatedBy], references: [id])

  @@index([conversationId])
  @@index([createdAt])
  @@index([recipientId])
  @@index([senderId])
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model notification_settings {
  id                String   @id
  userId            String   @unique
  pushEnabled       Boolean  @default(true)
  pushApplications  Boolean  @default(true)
  pushMessages      Boolean  @default(true)
  pushMatches       Boolean  @default(true)
  emailEnabled      Boolean  @default(true)
  emailApplications Boolean  @default(true)
  emailMessages     Boolean  @default(true)
  emailMatches      Boolean  @default(true)
  emailNewsletter   Boolean  @default(false)
  createdAt         DateTime @default(now())
  updatedAt         DateTime
  users             users    @relation(fields: [userId], references: [id], onDelete: Cascade)
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model notifications {
  id                                   String           @id
  userId                               String
  type                                 NotificationType
  title                                String
  message                              String
  data                                 Json?
  isRead                               Boolean          @default(false)
  readAt                               DateTime?
  createdAt                            DateTime         @default(now())
  createdBy                            String
  updatedAt                            DateTime
  updatedBy                            String
  error                                String?
  externalId                           String?
  priority                             String           @default("normal")
  sentAt                               DateTime?
  status                               String           @default("pending")
  users_notifications_createdByTousers users            @relation("notifications_createdByTousers", fields: [createdBy], references: [id])
  users_notifications_updatedByTousers users            @relation("notifications_updatedByTousers", fields: [updatedBy], references: [id])
  users_notifications_userIdTousers    users            @relation("notifications_userIdTousers", fields: [userId], references: [id], onDelete: Cascade)

  @@index([createdAt])
  @@index([userId, isRead])
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model payments {
  id                              String           @id
  companyId                       String
  amount                          Float
  currency                        String           @default("EUR")
  status                          PaymentStatus
  stripePaymentId                 String?          @unique
  stripeInvoiceId                 String?
  description                     String?
  invoiceUrl                      String?
  paidAt                          DateTime?
  createdAt                       DateTime         @default(now())
  createdBy                       String
  updatedAt                       DateTime
  updatedBy                       String
  company_profiles                company_profiles @relation(fields: [companyId], references: [id], onDelete: Cascade)
  users_payments_createdByTousers users            @relation("payments_createdByTousers", fields: [createdBy], references: [id])
  users_payments_updatedByTousers users            @relation("payments_updatedByTousers", fields: [updatedBy], references: [id])

  @@index([companyId])
  @@index([status])
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model push_tokens {
  id                                 String   @id
  userId                             String
  token                              String   @unique
  platform                           String
  isActive                           Boolean  @default(true)
  createdAt                          DateTime @default(now())
  createdBy                          String
  updatedAt                          DateTime
  updatedBy                          String
  lastUsedAt                         DateTime @default(now())
  deviceInfo                         Json?
  users_push_tokens_createdByTousers users    @relation("push_tokens_createdByTousers", fields: [createdBy], references: [id])
  users_push_tokens_updatedByTousers users    @relation("push_tokens_updatedByTousers", fields: [updatedBy], references: [id])
  users_push_tokens_userIdTousers    users    @relation("push_tokens_userIdTousers", fields: [userId], references: [id], onDelete: Cascade)

  @@index([token])
  @@index([userId])
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model saved_jobs {
  id               String           @id
  studentId        String
  jobId            String
  createdAt        DateTime         @default(now())
  createdBy        String
  users            users            @relation(fields: [createdBy], references: [id])
  jobs             jobs             @relation(fields: [jobId], references: [id], onDelete: Cascade)
  student_profiles student_profiles @relation(fields: [studentId], references: [id], onDelete: Cascade)

  @@unique([studentId, jobId])
  @@index([studentId])
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model sessions {
  id                              String   @id
  userId                          String
  token                           String   @unique
  ipAddress                       String?
  userAgent                       String?
  expiresAt                       DateTime
  createdAt                       DateTime @default(now())
  createdBy                       String
  users_sessions_createdByTousers users    @relation("sessions_createdByTousers", fields: [createdBy], references: [id])
  users_sessions_userIdTousers    users    @relation("sessions_userIdTousers", fields: [userId], references: [id], onDelete: Cascade)

  @@index([token])
  @@index([userId])
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model sso_accounts {
  id                                  String       @id
  userId                              String
  provider                            AuthProvider
  providerId                          String
  providerEmail                       String?
  accessToken                         String?
  refreshToken                        String?
  expiresAt                           DateTime?
  createdAt                           DateTime     @default(now())
  createdBy                           String
  updatedAt                           DateTime
  updatedBy                           String
  users_sso_accounts_createdByTousers users        @relation("sso_accounts_createdByTousers", fields: [createdBy], references: [id])
  users_sso_accounts_updatedByTousers users        @relation("sso_accounts_updatedByTousers", fields: [updatedBy], references: [id])
  users_sso_accounts_userIdTousers    users        @relation("sso_accounts_userIdTousers", fields: [userId], references: [id], onDelete: Cascade)

  @@unique([provider, providerId])
  @@index([userId])
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model student_documents {
  id                                       String           @id
  studentId                                String
  documentId                               String
  label                                    String?
  isPrimary                                Boolean          @default(false)
  createdAt                                DateTime         @default(now())
  createdBy                                String
  updatedAt                                DateTime
  updatedBy                                String
  users_student_documents_createdByTousers users            @relation("student_documents_createdByTousers", fields: [createdBy], references: [id])
  documents                                documents        @relation(fields: [documentId], references: [id], onDelete: Cascade)
  student_profiles                         student_profiles @relation(fields: [studentId], references: [id], onDelete: Cascade)
  users_student_documents_updatedByTousers users            @relation("student_documents_updatedByTousers", fields: [updatedBy], references: [id])

  @@unique([studentId, documentId])
  @@index([studentId])
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model student_matches {
  id                                     String           @id
  studentId                              String
  jobId                                  String
  matchScore                             Float
  reasons                                Json?
  studentViewed                          Boolean          @default(false)
  studentLiked                           Boolean?
  createdAt                              DateTime         @default(now())
  createdBy                              String
  updatedAt                              DateTime
  updatedBy                              String
  users_student_matches_createdByTousers users            @relation("student_matches_createdByTousers", fields: [createdBy], references: [id])
  jobs                                   jobs             @relation(fields: [jobId], references: [id], onDelete: Cascade)
  student_profiles                       student_profiles @relation(fields: [studentId], references: [id], onDelete: Cascade)
  users_student_matches_updatedByTousers users            @relation("student_matches_updatedByTousers", fields: [updatedBy], references: [id])

  @@unique([studentId, jobId])
  @@index([jobId])
  @@index([studentId, matchScore])
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model student_profiles {
  id                                      String              @id
  userId                                  String              @unique
  educationLevel                          EducationLevel?
  schoolName                              String?
  graduationYear                          Int?
  gpa                                     Float?
  questionnaireCompleted                  Boolean             @default(false)
  questionnaireData                       Json?
  personalityProfile                      Json?
  aiTags                                  String[]
  preferredLocations                      String[]
  maxCommutingDistance                    Int?
  willingToRelocate                       Boolean             @default(false)
  createdAt                               DateTime            @default(now())
  createdBy                               String              @default("system")
  updatedAt                               DateTime
  updatedBy                               String              @default("system")
  applications                            applications[]
  saved_jobs                              saved_jobs[]
  student_documents                       student_documents[]
  student_matches                         student_matches[]
  users_student_profiles_createdByTousers users               @relation("student_profiles_createdByTousers", fields: [createdBy], references: [id], onDelete: SetNull)
  users_student_profiles_updatedByTousers users               @relation("student_profiles_updatedByTousers", fields: [updatedBy], references: [id], onDelete: SetNull)
  users_student_profiles_userIdTousers    users               @relation("student_profiles_userIdTousers", fields: [userId], references: [id], onDelete: Cascade)
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model subscriptions {
  id                                   String             @id
  companyId                            String             @unique
  plan                                 SubscriptionPlan
  status                               SubscriptionStatus @default(ACTIVE)
  maxActiveJobs                        Int
  maxApplications                      Int
  startDate                            DateTime           @default(now())
  endDate                              DateTime
  autoRenew                            Boolean            @default(true)
  pricePerMonth                        Float
  currency                             String             @default("EUR")
  stripeCustomerId                     String?            @unique
  stripeSubscriptionId                 String?            @unique
  isTrialPeriod                        Boolean            @default(false)
  trialEndsAt                          DateTime?
  createdAt                            DateTime           @default(now())
  createdBy                            String
  updatedAt                            DateTime
  updatedBy                            String
  cancelledAt                          DateTime?
  company_profiles                     company_profiles   @relation(fields: [companyId], references: [id], onDelete: Cascade)
  users_subscriptions_createdByTousers users              @relation("subscriptions_createdByTousers", fields: [createdBy], references: [id])
  users_subscriptions_updatedByTousers users              @relation("subscriptions_updatedByTousers", fields: [updatedBy], references: [id])

  @@index([companyId])
  @@index([status])
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model system_settings {
  id                                     String   @id
  key                                    String   @unique
  value                                  Json
  description                            String?
  updatedBy                              String
  updatedAt                              DateTime
  createdAt                              DateTime @default(now())
  createdBy                              String
  users_system_settings_createdByTousers users    @relation("system_settings_createdByTousers", fields: [createdBy], references: [id])
  users_system_settings_updatedByTousers users    @relation("system_settings_updatedByTousers", fields: [updatedBy], references: [id])
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model tags {
  id                          String   @id
  name                        String   @unique
  slug                        String   @unique
  category                    String?
  usageCount                  Int      @default(0)
  createdAt                   DateTime @default(now())
  createdBy                   String
  updatedAt                   DateTime
  updatedBy                   String
  users_tags_createdByTousers users    @relation("tags_createdByTousers", fields: [createdBy], references: [id])
  users_tags_updatedByTousers users    @relation("tags_updatedByTousers", fields: [updatedBy], references: [id])

  @@index([category])
  @@index([slug])
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model users {
  id                                                           String                       @id
  email                                                        String                       @unique
  emailVerified                                                DateTime?
  password                                                     String?
  role                                                         UserRole                     @default(STUDENT)
  authProvider                                                 AuthProvider                 @default(LOCAL)
  firstName                                                    String?
  lastName                                                     String?
  dateOfBirth                                                  DateTime?
  phone                                                        String?
  twoFactorEnabled                                             Boolean                      @default(false)
  twoFactorSecret                                              String?
  createdAt                                                    DateTime                     @default(now())
  createdBy                                                    String?
  updatedAt                                                    DateTime
  updatedBy                                                    String?
  lastLoginAt                                                  DateTime?
  addresses_addresses_createdByTousers                         addresses[]                  @relation("addresses_createdByTousers")
  addresses_addresses_updatedByTousers                         addresses[]                  @relation("addresses_updatedByTousers")
  addresses_addresses_userIdTousers                            addresses[]                  @relation("addresses_userIdTousers")
  application_documents_application_documents_createdByTousers application_documents[]      @relation("application_documents_createdByTousers")
  application_documents_application_documents_updatedByTousers application_documents[]      @relation("application_documents_updatedByTousers")
  application_status_history                                   application_status_history[]
  applications_applications_createdByTousers                   applications[]               @relation("applications_createdByTousers")
  applications_applications_updatedByTousers                   applications[]               @relation("applications_updatedByTousers")
  audit_logs                                                   audit_logs[]
  categories_categories_createdByTousers                       categories[]                 @relation("categories_createdByTousers")
  categories_categories_updatedByTousers                       categories[]                 @relation("categories_updatedByTousers")
  company_documents_company_documents_createdByTousers         company_documents[]          @relation("company_documents_createdByTousers")
  company_documents_company_documents_updatedByTousers         company_documents[]          @relation("company_documents_updatedByTousers")
  company_locations_company_locations_createdByTousers         company_locations[]          @relation("company_locations_createdByTousers")
  company_locations_company_locations_updatedByTousers         company_locations[]          @relation("company_locations_updatedByTousers")
  company_matches_company_matches_createdByTousers             company_matches[]            @relation("company_matches_createdByTousers")
  company_matches_company_matches_updatedByTousers             company_matches[]            @relation("company_matches_updatedByTousers")
  company_member_invites                                       company_member_invites[]
  company_members_company_members_createdByTousers             company_members[]            @relation("company_members_createdByTousers")
  company_members_company_members_updatedByTousers             company_members[]            @relation("company_members_updatedByTousers")
  company_members_company_members_userIdTousers                company_members[]            @relation("company_members_userIdTousers")
  company_profiles_company_profiles_createdByTousers           company_profiles[]           @relation("company_profiles_createdByTousers")
  company_profiles_company_profiles_updatedByTousers           company_profiles[]           @relation("company_profiles_updatedByTousers")
  conversations_conversations_createdByTousers                 conversations[]              @relation("conversations_createdByTousers")
  conversations_conversations_updatedByTousers                 conversations[]              @relation("conversations_updatedByTousers")
  documents_documents_createdByTousers                         documents[]                  @relation("documents_createdByTousers")
  documents_documents_updatedByTousers                         documents[]                  @relation("documents_updatedByTousers")
  jobs_jobs_createdByTousers                                   jobs[]                       @relation("jobs_createdByTousers")
  jobs_jobs_updatedByTousers                                   jobs[]                       @relation("jobs_updatedByTousers")
  message_attachments                                          message_attachments[]
  messages_messages_createdByTousers                           messages[]                   @relation("messages_createdByTousers")
  messages_messages_updatedByTousers                           messages[]                   @relation("messages_updatedByTousers")
  notification_settings                                        notification_settings?
  notifications_notifications_createdByTousers                 notifications[]              @relation("notifications_createdByTousers")
  notifications_notifications_updatedByTousers                 notifications[]              @relation("notifications_updatedByTousers")
  notifications_notifications_userIdTousers                    notifications[]              @relation("notifications_userIdTousers")
  payments_payments_createdByTousers                           payments[]                   @relation("payments_createdByTousers")
  payments_payments_updatedByTousers                           payments[]                   @relation("payments_updatedByTousers")
  push_tokens_push_tokens_createdByTousers                     push_tokens[]                @relation("push_tokens_createdByTousers")
  push_tokens_push_tokens_updatedByTousers                     push_tokens[]                @relation("push_tokens_updatedByTousers")
  push_tokens_push_tokens_userIdTousers                        push_tokens[]                @relation("push_tokens_userIdTousers")
  saved_jobs                                                   saved_jobs[]
  sessions_sessions_createdByTousers                           sessions[]                   @relation("sessions_createdByTousers")
  sessions_sessions_userIdTousers                              sessions[]                   @relation("sessions_userIdTousers")
  sso_accounts_sso_accounts_createdByTousers                   sso_accounts[]               @relation("sso_accounts_createdByTousers")
  sso_accounts_sso_accounts_updatedByTousers                   sso_accounts[]               @relation("sso_accounts_updatedByTousers")
  sso_accounts_sso_accounts_userIdTousers                      sso_accounts[]               @relation("sso_accounts_userIdTousers")
  student_documents_student_documents_createdByTousers         student_documents[]          @relation("student_documents_createdByTousers")
  student_documents_student_documents_updatedByTousers         student_documents[]          @relation("student_documents_updatedByTousers")
  student_matches_student_matches_createdByTousers             student_matches[]            @relation("student_matches_createdByTousers")
  student_matches_student_matches_updatedByTousers             student_matches[]            @relation("student_matches_updatedByTousers")
  student_profiles_student_profiles_createdByTousers           student_profiles[]           @relation("student_profiles_createdByTousers")
  student_profiles_student_profiles_updatedByTousers           student_profiles[]           @relation("student_profiles_updatedByTousers")
  student_profiles_student_profiles_userIdTousers              student_profiles?            @relation("student_profiles_userIdTousers")
  subscriptions_subscriptions_createdByTousers                 subscriptions[]              @relation("subscriptions_createdByTousers")
  subscriptions_subscriptions_updatedByTousers                 subscriptions[]              @relation("subscriptions_updatedByTousers")
  system_settings_system_settings_createdByTousers             system_settings[]            @relation("system_settings_createdByTousers")
  system_settings_system_settings_updatedByTousers             system_settings[]            @relation("system_settings_updatedByTousers")
  tags_tags_createdByTousers                                   tags[]                       @relation("tags_createdByTousers")
  tags_tags_updatedByTousers                                   tags[]                       @relation("tags_updatedByTousers")

  @@index([email])
  @@index([role])
}

enum AddressType {
  HOME
  COMPANY
  BILLING
  SHIPPING
  OTHER
}

enum ApplicationStatus {
  DRAFT
  SUBMITTED
  IN_REVIEW
  SHORTLISTED
  INVITED
  REJECTED
  ACCEPTED
  WITHDRAWN
}

enum AuthProvider {
  LOCAL
  GOOGLE
  FACEBOOK
}

enum CompanyMemberRole {
  OWNER
  ADMIN
  RECRUITER
  VIEWER
}

enum CompanyMemberStatus {
  ACTIVE
  INVITED
  SUSPENDED
}

enum CompanyStatus {
  ACTIVE
  INACTIVE
  SUSPENDED
}

enum DocumentType {
  CV
  CERTIFICATE
  COVER_LETTER
  PROFILE_PICTURE
  COMPANY_LOGO
  COMPANY_IMAGE
  APPLICATION_DOCUMENT
  OTHER
}

enum EducationLevel {
  HAUPTSCHULABSCHLUSS
  REALSCHULABSCHLUSS
  FACHABITUR
  ABITUR
  STUDIENABBRECHER
  SONSTIGES
}

enum JobStatus {
  DRAFT
  ACTIVE
  PAUSED
  CLOSED
  EXPIRED
}

enum NotificationType {
  APPLICATION_STATUS
  NEW_MATCH
  NEW_MESSAGE
  NEW_APPLICATION
  SYSTEM
  PAYMENT
}

enum PaymentStatus {
  PENDING
  COMPLETED
  FAILED
  REFUNDED
}

enum SubscriptionPlan {
  BASIC
  PROFESSIONAL
  ENTERPRISE
}

enum SubscriptionStatus {
  ACTIVE
  CANCELLED
  EXPIRED
  TRIAL
}

enum UserRole {
  STUDENT
  COMPANY
  ADMIN
}
